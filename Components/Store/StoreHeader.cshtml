@inherits FenixAlliance.ABS.Core.Templating.Templates.DynamicComponentBase
@using System.Linq
@using Microsoft.EntityFrameworkCore
@using Microsoft.AspNetCore.Mvc.Rendering
@using Microsoft.AspNetCore.Localization

@{
    var CurrentUserIP = ViewBag.UserIP;
    var CartCurrencyID = ViewBag.CartCurrencyID;
    var Items = ViewBag.Items as System.Collections.Generic.List<FenixAlliance.ABM.Models.Logistics.Stock.Item.Item>;
    var Brands = ViewBag.Brands as System.Collections.Generic.List<FenixAlliance.ABM.Models.Logistics.Stock.ItemBrands.ItemBrand>;
    var Categories = ViewBag.Categories as System.Collections.Generic.List<FenixAlliance.ABM.Models.Logistics.Stock.ItemCategories.ItemCategory>;
    var ExchangeRates = FenixAlliance.ABM.SDK.Helpers.Deserialize.FromJson<FenixAlliance.ABM.Models.DTOs.Components.Global.Currencies.ForexRates>(ViewBag.ExchangeRates);

    var GoogleCategories = DataContext.ItemGoogleCategory.ToList();

    var requestCulture = Context.Features.Get<IRequestCultureFeature>();

    var cultureItems = RequestLocalizationOptions.Value.SupportedUICultures
    .Select(c => new SelectListItem { Value = c.Name, Text = c.DisplayName })
    .ToList();

    var returnUrl = string.IsNullOrEmpty(Context.Request.Path) ? "~/" : $"~{Context.Request.Path.Value}";


}
<style>

    .scrollbar {
        float: left;
        height: 400px;
        background: #F5F5F5;
        overflow-y: scroll;
    }


    #wrapper {
        text-align: center;
        width: 500px;
        margin: auto;
    }
</style>
<script>
    //Select Language
    function SelectLang(value) {
        cookie = "c=" + value.trim() + "|uic=" + value.trim();
        Cookies.set('.AspNetCore.Culture', cookie);
        window.location.reload();
    }
</script>

<!--====== Main Header ======-->
<header class="header--style-1">
    <!--====== Nav 1 ======-->
    <nav class="primary-nav primary-nav-wrapper--border">
        <div class="container">

            <!--====== Primary Nav ======-->
            <div class="primary-nav">

                <!--====== Main Logo ======-->
                <a class="main-logo" href="/Store">
                    <img src="@(Portal.Options.Branding.HeaderLogo.DefaltLogoURL ?? "/ui/images/GenericLogo.svg")" onerror="this.src='/ui/images/GenericLogo.svg'" style="height:40px" alt="Logo">
                </a>
                <!--====== End - Main Logo ======-->
                <!--====== Search Form ======-->
                <form class="main-form" action="/Store/Products/Search">

                    <label for="main-search"></label>

                    <input class="input-text input-text--border-radius input-text--style-1" type="text" id="main-search" required name="Query" value="" placeholder="@_("Search by SKU, Name, MPN...")">

                    <button class="btn btn--icon fas fa-search main-search-button" type="submit"></button>
                </form>
                <!--====== End - Search Form ======-->
                <!--====== Dropdown Main plugin ======-->
                <div class="menu-init" id="navigation">

                    <button class="btn btn--icon toggle-button toggle-button--secondary fas fa-cogs" type="button"></button>

                    <!--====== Menu ======-->
                    <div class="ah-lg-mode">

                        <span class="ah-close">✕ Close</span>

                        <!--====== List ======-->
                        <ul class="ah-list ah-list--design1 ah-list--link-color-secondary">
                            @if (User.Identity.IsAuthenticated)
                            {
                                <li class="has-dropdown" data-tooltip="tooltip" data-placement="left" title="Account">

                                    <a><i class="far fa-user-circle"></i></a>

                                    <!--====== Dropdown ======-->

                                    <span class="js-menu-toggle"></span>
                                    <ul style="width:120px">
                                        <li>
                                            <a href="/Account/Index">
                                                <i class="fas fa-user-circle u-s-m-r-6"></i>
                                                <span>Account</span>
                                            </a>
                                        </li>

                                        <li>

                                            <a href="/Account/SignOut">
                                                <i class="fas fa-lock-open u-s-m-r-6"></i>

                                                <span>Signout</span>
                                            </a>
                                        </li>
                                    </ul>
                                    <!--====== End - Dropdown ======-->
                                </li>
                            }
                            else
                            {
                                <li class="has-dropdown" data-tooltip="tooltip" data-placement="left" title="Login">
                                    <a href="/Account/Login"><i class="far fa-user-circle"></i></a>
                                </li>
                            }

                            <li class="has-dropdown" data-tooltip="tooltip" data-placement="left" title="Settings">

                                <a><i class="fas fa-user-cog"></i></a>

                                <!--====== Dropdown ======-->

                                <span class="js-menu-toggle"></span>
                                <ul style="width:120px">
                                    <li class="has-dropdown has-dropdown--ul-right-100">

                                        <a>
                                            Language
                                            <i class="fas fa-angle-down u-s-m-l-6"></i>
                                        </a>

                                        <!--====== Dropdown ======-->

                                        <span class="js-menu-toggle"></span>

                                        <ul>

                                            <li>
                                                <a class="u-c-brand">
                                                    @requestCulture.RequestCulture.Culture.TwoLetterISOLanguageName
                                                </a>
                                            </li>

                                            @foreach (var culture in cultureItems)
                                            {
                                                <li>
                                                    <a href="javascript:void(0)" onclick="SelectLang('@(@culture.Value.Replace(" ",""))')">
                                                        <i class="fas fa-language"></i>&nbsp; @culture.Text
                                                    </a>
                                                </li>
                                            }

                                        </ul>
                                        <!--====== End - Dropdown ======-->
                                    </li>

                                    <li class="has-dropdown has-dropdown--ul-right-100">

                                        <a>Currency<i class="fas fa-angle-down u-s-m-l-6"></i></a>

                                        <!--====== Dropdown ======-->

                                        <span class="js-menu-toggle"></span>
                                        <ul style="width:225px">

                                            <li>
                                                <a class="u-c-brand">
                                                <script>document.write(CartCurrencyCode);</script></a>
                                            </li>

                                        </ul>
                                        <!--====== End - Dropdown ======-->
                                    </li>
                                </ul>
                                <!--====== End - Dropdown ======-->
                            </li>
                            <li data-tooltip="tooltip" data-placement="left" title="Contact">

                                <a href="tel:+0900901904"><i class="fas fa-phone-volume"></i></a>
                            </li>
                            <li data-tooltip="tooltip" data-placement="left" title="Mail">

                                <a href="mailto:contact@@domain.com"><i class="far fa-envelope"></i></a>
                            </li>
                        </ul>
                        <!--====== End - List ======-->
                    </div>
                    <!--====== End - Menu ======-->
                </div>
                <!--====== End - Dropdown Main plugin ======-->
            </div>
            <!--====== End - Primary Nav ======-->
        </div>
    </nav>
    <!--====== End - Nav 1 ======-->
    <!--====== Nav 2 ======-->
    <nav class="secondary-nav-wrapper">
        <div class="container">
            <!--====== Secondary Nav ======-->
            <div class="secondary-nav">

                <!--====== Dropdown Main plugin ======-->
                <div class="menu-init" id="navigation1">

                    <button class="btn btn--icon toggle-mega-text toggle-button" type="button">M</button>
                    <!--====== Menu ======-->
                    <div class="ah-lg-mode">

                        <span class="ah-close">✕ Close</span>

                        <!--====== List ======-->
                        <ul class="ah-list">
                            <li class="has-dropdown">

                                <span class="mega-text">C</span>

                                <!--====== Mega Menu ======-->

                                <span class="js-menu-toggle"></span>
                                <div class="mega-menu">
                                    <div class="mega-menu-wrap">
                                        <div id="wrapper" class="mega-menu-list">


                                            <ul class="scrollbar">
                                                @foreach (var item in GoogleCategories.Where(c => c.ParentItemGoogleCategoryID == null))
                                                {
                                                    <li class="js-active">
                                                        <a href="javascript:void(0)">
                                                            <span>@item.Name</span>
                                                        </a>

                                                        <span class="js-menu-toggle js-toggle-mark"></span>
                                                    </li>
                                                }
                                            </ul>
                                        </div>
                                        @{
                                            var first = true;
                                        }
                                        @foreach (var item in GoogleCategories.Where(c => c.ParentItemGoogleCategoryID == null))
                                        {
                                            <!--====== Electronics ======-->
                                            <div class="mega-menu-content @((first) ? "js-active" : string.Empty )">
                                                @{
                                                    first = false;
                                                }
                                                <div class="row">
                                                    @foreach (var subCategory in GoogleCategories.Where(c => c.ParentItemGoogleCategoryID == item.ID))
                                                    {
                                                        <div class="col-lg-3">
                                                            <ul>

                                                                <li class="mega-list-title">
                                                                    <a href="javascript:void(0)">@subCategory.Name</a>
                                                                </li>

                                                                @foreach (var subSubCategory in GoogleCategories.Where(c => c.ParentItemGoogleCategoryID == subCategory.ID))
                                                                {
                                                                    <li>
                                                                        <a href="javascript:void(0)">@subSubCategory.Name</a>
                                                                    </li>
                                                                }
                                                            </ul>
                                                        </div>
                                                    }
                                                    <!--====== End - Mega Menu Row ======-->
                                                </div>
                                                <br>
                                            </div>
                                            <!--====== End - Electronics ======-->
                                        }

                                    </div>
                                </div>
                                <!--====== End - Mega Menu ======-->
                            </li>
                        </ul>
                        <!--====== End - List ======-->
                    </div>
                    <!--====== End - Menu ======-->
                </div>
                <!--====== End - Dropdown Main plugin ======-->
                <!--====== Dropdown Main plugin ======-->
                <div class="menu-init" id="navigation2">

                    <button class="btn btn--icon toggle-button toggle-button--secondary fas fa-cog" type="button"></button>

                    <!--====== Menu ======-->
                    <div class="ah-lg-mode">

                        <span class="ah-close">✕ Close</span>

                        <!--====== List ======-->
                        <ul class="ah-list ah-list--design2 ah-list--link-color-secondary">

                            <li>
                                <a href="/Store/Products">PRODUCTS</a>
                            </li>


                            <li>
                                <a href="/Store/Deals/NewArrivals">NEW ARRIVALS</a>
                            </li>


                            @if (Categories is not null && Categories.Count != 0)
                            {

                                <li class="has-dropdown">

                                    <a>
                                        CATEGORIES
                                        <i class="fas fa-angle-down u-s-m-l-6"></i>
                                    </a>

                                    <!--====== Dropdown ======-->
                                    <span class="js-menu-toggle"></span>

                                    <ul style="width:200px">
                                        @foreach (var item in Categories)
                                        {
                                            <li>

                                                <a href="/Store/Categories/@item.ID">Blog Left Sidebar</a>
                                            </li>
                                        }
                                    </ul>
                                    <!--====== End - Dropdown ======-->
                                </li>
                            }

                            <li>
                                <a href="/Store/Deals/DailyDeals">DAILY DEALS</a>
                            </li>

                            <li>
                                <a href="/Store/Deals/WeeklyDeals">WEEKLY DEALS</a>
                            </li>

                        </ul>
                        <!--====== End - List ======-->
                    </div>
                    <!--====== End - Menu ======-->
                </div>
                <!--====== End - Dropdown Main plugin ======-->

                @await ViewService.RenderAsync("StoreCartDropdown", Model)

            </div>
            <!--====== End - Secondary Nav ======-->
        </div>
    </nav>
    <!--====== End - Nav 2 ======-->
</header>
<!--====== End - Main Header ======-->
