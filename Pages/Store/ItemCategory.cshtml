@inherits FenixAlliance.ABS.Core.Templating.Templates.DynamicComponentBase
@using FenixAlliance.ABM.Models.Logistics.Stock.ItemBrands
@using FenixAlliance.ABM.Models.Logistics.Stock.Item
@using FenixAlliance.ABM.SDK.Helpers
@using System.Linq
@using System.Collections.Generic

@{
    var category = Model as FenixAlliance.ABM.Models.Logistics.Stock.ItemCategories.ItemCategory;
}

<div class="container">
    <div class="row">
        <div class="col-md-4">
            <div class="product-slide-entry">
                <div class="product-image">
                    <a href="Store/Categories/Details/@category.ID">
                        <img src="@(category.ImageURL ?? "/Store/img/empty-image.png")" onerror="this.src='/Store/img/empty-image.png'"  alt="@category.Title">
                    </a>
                </div>

            </div>
            <div class="clear"></div>
        </div>
        <div class="col-md-6 my-auto">
            @if (!string.IsNullOrEmpty(category.Title))
            {
                <hr />
                @category.Title
            }
            
            @if (!string.IsNullOrEmpty(category.Description))
            {
                <hr />
                @category.Description
            }

            <hr />
            <a href="/Store/Categories">Back to List</a>
            <hr />
        </div>
    </div>
</div>

@await Component.InvokeAsync("ItemsGrid", ListPaggingHelpers<Item>.Paginate(category.DiscoveredItems, ViewBag.pageIndex ?? 1, ViewBag.pageSize ?? 24))